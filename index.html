<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>shitcord67</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="app">
    <div id="loginScreen" class="screen screen--active">
      <div class="login-card">
        <h1>Welcome back</h1>
        <p>Sign in with a username to continue to shitcord67</p>
        <form id="loginForm">
          <label for="loginUsername">Username</label>
          <input id="loginUsername" type="text" maxlength="24" placeholder="Type a username" required />
          <button type="submit">Enter</button>
        </form>
      </div>
    </div>

    <div id="chatScreen" class="screen">
      <aside class="server-rail">
        <div class="server-rail-scroll">
          <button id="serverBrand" class="server-brand" title="Direct Messages" aria-label="Direct Messages">
            <span class="server-brand__icon" aria-hidden="true">ðŸ«ª</span>
            <span id="serverBrandBadge" class="server-brand__badge" hidden></span>
          </button>
          <div id="serverList" class="server-list"></div>
          <button id="createServerBtn" class="icon-btn icon-btn--add" title="Create Guild">+</button>
        </div>
      </aside>

      <aside class="channel-panel">
        <div class="channel-panel__header">
          <span id="activeServerName">Guild</span>
        </div>

        <div class="channel-scroll">
          <section id="dmSection">
            <div class="channel-section-title">Direct Messages</div>
            <input id="dmSearchInput" class="channel-filter" type="text" maxlength="40" placeholder="Find or start DM" />
            <div id="dmList" class="channel-list channel-list--dm"></div>
            <button id="newDmBtn" class="channel-create">+ New DM</button>
          </section>
          <section id="guildSection">
            <div class="channel-section-title">Channels</div>
            <input id="channelFilterInput" class="channel-filter" type="text" maxlength="40" placeholder="Filter channels" />
            <div id="channelList" class="channel-list"></div>
            <button id="createChannelBtn" class="channel-create">+ Create Channel</button>
          </section>
        </div>

      </aside>

      <main class="chat-panel">
        <header class="chat-header">
          <h2 id="activeChannelName">#general</h2>
          <div class="chat-header__right">
            <span id="activeChannelTopic" class="chat-topic"></span>
            <button id="openChannelSettingsBtn" class="chat-topic-edit" title="Channel settings">Channel</button>
            <button id="openPinsBtn" class="chat-topic-edit" title="Pinned messages">Pins</button>
            <button id="openRolesBtn" class="chat-topic-edit" title="Manage roles">Roles</button>
            <button id="toggleSwfShelfBtn" class="chat-topic-edit" title="Toggle SWF shelf">SWF Shelf</button>
            <button id="editTopicBtn" class="chat-topic-edit" title="Edit channel topic">Edit Topic</button>
          </div>
        </header>

        <section id="messageList" class="message-list"></section>
        <section id="swfShelf" class="swf-shelf swf-shelf--hidden">
          <div class="swf-shelf__header">
            <strong>Saved SWFs</strong>
            <button id="clearSwfShelfBtn" type="button">Clear</button>
          </div>
          <div id="swfShelfList" class="swf-shelf__list"></div>
        </section>

        <div class="composer-stack">
          <div id="composerReplyBar" class="composer-reply composer-reply--hidden">
            <span id="replyPreviewText"></span>
            <button id="cancelReplyBtn" type="button" title="Cancel reply">âœ•</button>
          </div>

          <div id="slashCommandPopup" class="slash-popup slash-popup--hidden">
            <div id="suggestionHint" class="slash-popup__hint">Use â†‘â†“ and Enter/Tab to select</div>
            <div id="slashCommandList" class="slash-popup__list"></div>
          </div>

          <div id="mediaPicker" class="media-picker media-picker--hidden">
            <nav class="media-picker__tabs" role="tablist" aria-label="Media picker categories">
              <button type="button" class="media-picker__tab active" data-media-tab="gif">GIFs</button>
              <button type="button" class="media-picker__tab" data-media-tab="sticker">Sticker</button>
              <button type="button" class="media-picker__tab" data-media-tab="emoji">Emojis</button>
              <button type="button" class="media-picker__tab" data-media-tab="swf">SWFs</button>
              <button type="button" class="media-picker__tab" data-media-tab="svg">SVGs</button>
              <button type="button" class="media-picker__tab" data-media-tab="pdf">PDFs</button>
              <button type="button" class="media-picker__tab" data-media-tab="text">Text</button>
              <button type="button" class="media-picker__tab" data-media-tab="docs">Docs</button>
              <button type="button" class="media-picker__tab" data-media-tab="html">HTML</button>
            </nav>
            <div class="media-picker__header">
              <input id="mediaSearchInput" type="text" maxlength="80" placeholder="Search media" />
              <div class="media-picker__actions">
                <button id="addMediaUrlBtn" type="button">Add URL</button>
                <button id="addMediaFileBtn" type="button">Add File</button>
              </div>
              <input id="mediaFileInput" type="file" hidden />
            </div>
            <div id="mediaGrid" class="media-picker__grid"></div>
          </div>

          <div id="composerAttachmentBar" class="composer-reply composer-reply--hidden">
            <span id="composerAttachmentText"></span>
            <button id="saveComposerAttachmentBtn" type="button" title="Save to picker">Save to picker</button>
            <button id="clearComposerAttachmentBtn" type="button" title="Clear attachment">âœ•</button>
          </div>

          <form id="messageForm" class="message-form">
            <button id="openMediaPickerBtn" type="button" class="message-form__media-btn" title="Open media picker">+</button>
            <button id="openGifPickerBtn" type="button" class="message-form__media-btn message-form__tab-btn" title="Open GIF picker">GIF</button>
            <button id="openStickerPickerBtn" type="button" class="message-form__media-btn message-form__tab-btn" title="Open Sticker picker">STK</button>
            <button id="openEmojiPickerBtn" type="button" class="message-form__media-btn message-form__tab-btn" title="Open Emoji picker">ðŸ™‚</button>
            <button id="quickFileAttachBtn" type="button" class="message-form__media-btn" title="Attach file from computer (PDF/Text/Docs)">ðŸ“Ž</button>
            <button id="toggleSwfAudioBtn" type="button" class="message-form__media-btn" title="Toggle SWF audio">ðŸ”‡</button>
            <input id="messageInput" type="text" maxlength="400" placeholder="Message #general" />
            <button type="submit">Send</button>
          </form>
          <input id="quickAttachInput" type="file" accept=".pdf,.txt,.md,.log,.json,.js,.ts,.css,.xml,.yml,.yaml,.ini,.toml,.odt,.ods,.odp,.rtf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.bin,application/pdf,text/plain,application/json,application/rtf,text/rtf,application/vnd.oasis.opendocument.text,application/vnd.oasis.opendocument.spreadsheet,application/vnd.oasis.opendocument.presentation,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document" hidden />
        </div>
      </main>

      <aside class="member-panel">
        <h3>Members</h3>
        <div id="memberList" class="member-list"></div>
      </aside>

      <div class="left-bottom-dock">
        <div class="account-dock">
          <button id="selfProfileBtn" class="account-dock__main" title="Open profile">
            <div class="dock-avatar-wrap">
              <div id="dockAvatar" class="dock-avatar"></div>
              <span id="dockPresenceDot" class="dock-presence-dot presence-online"></span>
            </div>
            <div class="dock-meta">
              <strong id="dockName">User</strong>
              <span id="dockStatus">Online</span>
            </div>
          </button>
          <div class="account-dock__actions">
            <button id="dockMuteBtn" class="account-dock__icon" title="Mute">ðŸŽ¤</button>
            <button id="dockHeadphonesBtn" class="account-dock__icon" title="Deafen">ðŸŽ§</button>
            <button id="openSettingsBtn" class="account-dock__icon" title="User settings">âš™</button>
          </div>
        </div>
      </div>
    </div>

    <section id="settingsScreen" class="settings-screen">
      <aside class="settings-nav">
        <div class="settings-nav__title">User Settings</div>
        <button class="settings-nav__item active" data-settings-tab="my-account">My Account</button>
        <button class="settings-nav__item" data-settings-tab="profiles">Profiles</button>
        <button class="settings-nav__item" data-settings-tab="notifications">Notifications</button>
        <button class="settings-nav__item" data-settings-tab="appearance">Appearance</button>
        <button class="settings-nav__item" data-settings-tab="advanced">Advanced</button>
      </aside>
      <main class="settings-content">
        <header class="settings-content__header">
          <h2 id="settingsTitle">My Account</h2>
          <button id="closeSettingsBtn" class="settings-close" title="Close">âœ•</button>
        </header>

        <section class="settings-panel settings-panel--active" data-settings-panel="my-account">
          <div class="settings-card">
            <h3>Account</h3>
            <p><strong id="settingsDisplayName">User</strong></p>
            <p id="settingsUsername">@user</p>
            <p id="settingsCurrentStatus">Online</p>
            <div class="settings-inline-actions">
              <button id="settingsEditProfile" type="button">Edit Profile</button>
              <button id="settingsSwitchAccount" type="button">Switch Account</button>
              <button id="settingsLogout" type="button">Log Out</button>
            </div>
          </div>
        </section>

        <section class="settings-panel" data-settings-panel="profiles">
          <div class="settings-card">
            <h3>Profile Quick Edit</h3>
            <p>Use the edit profile flow to change banner, bio, status, avatar, and display name.</p>
            <button id="settingsOpenProfileEditor" type="button">Open Profile Editor</button>
          </div>
        </section>

        <section class="settings-panel" data-settings-panel="appearance">
          <form id="appearanceForm" class="settings-card">
            <h3>Appearance</h3>
            <label for="uiScaleInput">UI Scale</label>
            <input id="uiScaleInput" type="range" min="90" max="115" step="1" />
            <label for="themeInput">Theme</label>
            <select id="themeInput">
              <option value="oled">OLED</option>
              <option value="discord">Discord-like</option>
            </select>
            <label for="compactModeInput">Compact member list</label>
            <select id="compactModeInput">
              <option value="off">Off</option>
              <option value="on">On</option>
            </select>
            <button type="submit">Save Appearance</button>
          </form>
        </section>

        <section class="settings-panel" data-settings-panel="notifications">
          <form id="guildNotifForm" class="settings-card">
            <h3>Guild Notifications</h3>
            <p>Configure notification mode for the currently active guild.</p>
            <p><strong id="guildNotifGuildName">No guild selected</strong></p>
            <label for="guildNotifModeInput">Notification mode</label>
            <select id="guildNotifModeInput">
              <option value="all">All messages</option>
              <option value="mentions">Mentions only</option>
              <option value="mute">Mute guild</option>
            </select>
            <button type="submit">Save Notifications</button>
          </form>
        </section>

        <section class="settings-panel" data-settings-panel="advanced">
          <form id="advancedForm" class="settings-card">
            <h3>Advanced</h3>
            <label for="developerModeInput">Developer mode</label>
            <select id="developerModeInput">
              <option value="off">Off</option>
              <option value="on">On</option>
            </select>
            <label for="debugOverlayInput">Debug overlay</label>
            <select id="debugOverlayInput">
              <option value="off">Off</option>
              <option value="on">On</option>
            </select>
            <label for="swfAudioPolicyInput">SWF audio policy</label>
            <select id="swfAudioPolicyInput">
              <option value="single">Only one SWF with audio</option>
              <option value="multi">Allow multiple SWFs with audio</option>
            </select>
            <label for="swfAudioScopeInput">SWF audio scope</label>
            <select id="swfAudioScopeInput">
              <option value="global">Global (all guilds/chats)</option>
              <option value="guild">Per guild/chat</option>
            </select>
            <label for="swfAutoplayInput">SWF autoplay default</label>
            <select id="swfAutoplayInput">
              <option value="on">Autoplay when visible</option>
              <option value="off">Start paused</option>
            </select>
            <label for="swfPauseOnMuteInput">Pause SWF when auto-muted</label>
            <select id="swfPauseOnMuteInput">
              <option value="off">Off</option>
              <option value="on">On</option>
            </select>
            <label for="swfVuMeterInput">SWF VU meter (details)</label>
            <select id="swfVuMeterInput">
              <option value="off">Off</option>
              <option value="on">On</option>
            </select>
            <div class="settings-inline-actions">
              <button id="exportDataBtn" type="button">Export App JSON</button>
              <button id="importDataBtn" type="button">Import App JSON</button>
              <button id="exportSwfSavesBtn" type="button">Export SWF Saves</button>
              <button id="importSwfSavesBtn" type="button">Import SWF Saves</button>
              <button id="openDebugConsoleBtn" type="button">Debug Console</button>
            </div>
            <input id="importDataInput" type="file" accept="application/json" hidden />
            <input id="importSwfSavesInput" type="file" accept="application/json" hidden />
            <button type="submit">Save Advanced</button>
          </form>
        </section>
      </main>
    </section>
  </div>

  <dialog id="profileDialog" class="modal">
    <form id="profileForm" class="modal-form" method="dialog">
      <h3>Edit profile</h3>
      <label for="displayNameInput">Display name</label>
      <input id="displayNameInput" type="text" maxlength="32" placeholder="Display name" />
      <label for="profileBioInput">Bio</label>
      <textarea id="profileBioInput" maxlength="180"></textarea>
      <label for="profileStatusInput">Custom status</label>
      <input id="profileStatusInput" type="text" maxlength="80" placeholder="Grinding channels..." />
      <label for="profileStatusEmojiInput">Status emoji</label>
      <input id="profileStatusEmojiInput" type="text" maxlength="4" placeholder="ðŸ˜€" />
      <label for="profileStatusExpiryInput">Clear status after</label>
      <select id="profileStatusExpiryInput">
        <option value="never">Don't clear</option>
        <option value="30m">30 minutes</option>
        <option value="1h">1 hour</option>
        <option value="4h">4 hours</option>
        <option value="today">Today</option>
      </select>
      <label for="profileGuildNicknameInput">Nickname (active guild)</label>
      <input id="profileGuildNicknameInput" type="text" maxlength="32" placeholder="Server nickname" />
      <label for="profileGuildAvatarInput">Avatar color (active guild)</label>
      <input id="profileGuildAvatarInput" type="text" placeholder="#57f287" />
      <label for="profileGuildAvatarUrlInput">Avatar image URL (active guild)</label>
      <input id="profileGuildAvatarUrlInput" type="text" placeholder="https://..." />
      <label for="profileGuildBannerInput">Banner color/image URL (active guild)</label>
      <input id="profileGuildBannerInput" type="text" placeholder="#3f51b5 or https://..." />
      <label for="profileGuildStatusInput">Status (active guild)</label>
      <input id="profileGuildStatusInput" type="text" maxlength="80" placeholder="Available for this guild" />
      <label for="presenceInput">Presence</label>
      <select id="presenceInput">
        <option value="online">Online</option>
        <option value="idle">Idle</option>
        <option value="dnd">Do Not Disturb</option>
        <option value="invisible">Invisible</option>
      </select>
      <label for="profileBannerInput">Banner color or image URL</label>
      <input id="profileBannerInput" type="text" placeholder="#3f51b5 or https://..." />
      <label for="profileAvatarInput">Avatar color</label>
      <input id="profileAvatarInput" type="text" placeholder="#57f287" />
      <label for="profileAvatarUrlInput">Avatar image URL</label>
      <input id="profileAvatarUrlInput" type="text" placeholder="https://..." />
      <div class="profile-avatar-upload">
        <div id="profileAvatarPreview" class="profile-avatar-upload__preview" aria-hidden="true"></div>
        <div class="profile-avatar-upload__actions">
          <button id="profileAvatarUploadBtn" type="button">Upload Avatar</button>
          <button id="profileAvatarClearBtn" type="button">Clear Avatar Image</button>
          <small id="profileAvatarUploadHint">Accepts image files up to 2 MB.</small>
        </div>
      </div>
      <input id="profileAvatarFileInput" type="file" accept="image/*" hidden />
      <div class="modal-actions">
        <button type="button" id="profileCancel">Cancel</button>
        <button type="submit">Save</button>
      </div>
    </form>
  </dialog>

  <dialog id="createServerDialog" class="modal">
    <form id="createServerForm" class="modal-form" method="dialog">
      <h3>Create guild</h3>
      <label for="serverNameInput">Guild name</label>
      <input id="serverNameInput" type="text" maxlength="40" required />
      <div class="modal-actions">
        <button type="button" id="serverCancel">Cancel</button>
        <button type="submit">Create</button>
      </div>
    </form>
  </dialog>

  <dialog id="createChannelDialog" class="modal">
    <form id="createChannelForm" class="modal-form" method="dialog">
      <h3>Create channel</h3>
      <label for="channelNameInput">Channel name</label>
      <input id="channelNameInput" type="text" maxlength="40" required />
      <label for="channelTypeInput">Channel type</label>
      <select id="channelTypeInput">
        <option value="text">Text</option>
        <option value="announcement">Announcement</option>
        <option value="forum">Forum</option>
        <option value="media">Media</option>
      </select>
      <div class="modal-actions">
        <button type="button" id="channelCancel">Cancel</button>
        <button type="submit">Create</button>
      </div>
    </form>
  </dialog>

  <dialog id="topicDialog" class="modal">
    <form id="topicForm" class="modal-form" method="dialog">
      <h3>Edit channel topic</h3>
      <label for="topicInput">Topic</label>
      <input id="topicInput" type="text" maxlength="140" placeholder="What is this channel about?" />
      <div class="modal-actions">
        <button type="button" id="topicCancel">Cancel</button>
        <button type="submit">Save</button>
      </div>
    </form>
  </dialog>

  <dialog id="channelSettingsDialog" class="modal">
    <form id="channelSettingsForm" class="modal-form" method="dialog">
      <h3>Channel settings</h3>
      <label for="channelRenameInput">Channel name</label>
      <input id="channelRenameInput" type="text" maxlength="40" />
      <div class="modal-actions">
        <button type="button" id="channelSettingsCancel">Cancel</button>
        <button type="submit">Save</button>
      </div>
      <div class="modal-actions">
        <button type="button" id="deleteChannelBtn">Delete channel</button>
      </div>
    </form>
  </dialog>

  <dialog id="messageEditDialog" class="modal">
    <form id="messageEditForm" class="modal-form" method="dialog">
      <h3>Edit message</h3>
      <label for="messageEditInput">Message</label>
      <textarea id="messageEditInput" maxlength="400"></textarea>
      <div class="modal-actions">
        <button type="button" id="messageEditCancel">Cancel</button>
        <button type="submit">Save</button>
      </div>
    </form>
  </dialog>

  <dialog id="selfMenuDialog" class="modal profile-popout">
    <div class="profile-preview">
      <div id="selfPopoutBanner" class="profile-preview__banner"></div>
      <div class="profile-preview__body">
        <div id="selfPopoutAvatar" class="profile-preview__avatar"></div>
        <h4 id="selfPopoutName">User</h4>
        <p id="selfPopoutStatus">Online</p>
        <p id="selfPopoutBio">No bio yet.</p>
        <div id="selfPopoutRoles" class="role-chip-list"></div>
      </div>
      <div class="modal-actions modal-actions--stack">
        <button type="button" id="selfEditProfile">Edit Profile</button>
        <button type="button" id="selfSwitchAccount">Switch Account</button>
        <button type="button" id="selfLogout">Log Out</button>
      </div>
    </div>
  </dialog>

  <dialog id="userPopoutDialog" class="modal profile-popout">
    <div class="profile-preview">
      <div id="userPopoutBanner" class="profile-preview__banner"></div>
      <div class="profile-preview__body">
        <div id="userPopoutAvatar" class="profile-preview__avatar"></div>
        <h4 id="userPopoutName">User</h4>
        <p id="userPopoutStatus">Online</p>
        <p id="userPopoutBio">No bio yet.</p>
        <div id="userPopoutRoles" class="role-chip-list"></div>
        <label for="userNoteInput">Your note about this user</label>
        <textarea id="userNoteInput" maxlength="240" placeholder="Private note only visible to you"></textarea>
        <label for="userDmInput">Quick DM</label>
        <input id="userDmInput" type="text" maxlength="240" placeholder="Send a direct message..." />
      </div>
      <div class="modal-actions modal-actions--stack">
        <button type="button" id="userStartDmBtn">Start DM</button>
        <button type="button" id="userSendDmBtn">Send Quick DM</button>
        <button type="button" id="userSaveNoteBtn">Save Note</button>
      </div>
    </div>
  </dialog>

  <dialog id="rolesDialog" class="modal">
    <form id="rolesForm" class="modal-form" method="dialog">
      <h3>Guild Roles</h3>

      <label for="roleNameInput">Create role name</label>
      <input id="roleNameInput" type="text" maxlength="28" placeholder="Moderator" />
      <label for="roleColorInput">Role color</label>
      <input id="roleColorInput" type="text" maxlength="24" placeholder="#f23f43" />

      <label for="rolePermPresetInput">Permission preset</label>
      <select id="rolePermPresetInput">
        <option value="member">Member</option>
        <option value="mod">Moderator</option>
        <option value="admin">Admin</option>
      </select>

      <button id="createRoleNowBtn" type="button">Create Role</button>

      <label for="assignRoleMemberInput">Assign role to member</label>
      <select id="assignRoleMemberInput"></select>
      <label for="assignRoleRoleInput">Role</label>
      <select id="assignRoleRoleInput"></select>
      <div class="modal-actions">
        <button type="button" id="removeRoleBtn">Remove</button>
        <button type="button" id="assignRoleBtn">Assign</button>
      </div>

      <div class="modal-actions">
        <button type="button" id="rolesCloseBtn">Close</button>
      </div>
    </form>
  </dialog>

  <dialog id="pinsDialog" class="modal">
    <form id="pinsForm" class="modal-form" method="dialog">
      <h3>Pinned Messages</h3>
      <div id="pinsList" class="pins-list"></div>
      <div class="modal-actions">
        <button type="button" id="pinsCloseBtn">Close</button>
      </div>
    </form>
  </dialog>

  <dialog id="accountSwitchDialog" class="modal">
    <form id="accountSwitchForm" class="modal-form" method="dialog">
      <h3>Switch account</h3>
      <div id="accountList" class="account-list"></div>
      <label for="newAccountInput">Login as another username</label>
      <input id="newAccountInput" type="text" maxlength="24" placeholder="new_username" />
      <div class="modal-actions">
        <button type="button" id="accountCancel">Cancel</button>
        <button type="submit">Use account</button>
      </div>
    </form>
  </dialog>

  <dialog id="debugDialog" class="modal">
    <form id="debugForm" class="modal-form" method="dialog">
      <h3>Debug Console</h3>
      <pre id="debugOutput" class="debug-output"></pre>
      <div class="modal-actions">
        <button id="copyDebugBtn" type="button">Copy Logs</button>
        <button id="refreshDebugBtn" type="button">Refresh</button>
        <button id="clearDebugBtn" type="button">Clear</button>
        <button id="debugCloseBtn" type="button">Close</button>
      </div>
    </form>
  </dialog>

  <section id="swfPipDock" class="swf-pip swf-pip--hidden">
    <header class="swf-pip__header">
      <strong>SWF PiP</strong>
      <button id="swfPipCloseBtn" type="button">Hide</button>
    </header>
    <div id="swfPipTabs" class="swf-pip__tabs"></div>
    <div id="swfPipHost" class="swf-pip__host"></div>
  </section>

  <dialog id="swfViewerDialog" class="modal swf-viewer">
    <div class="swf-viewer__card">
      <div class="swf-viewer__top">
        <strong id="swfViewerTitle">SWF Viewer</strong>
        <div class="swf-viewer__actions">
          <label for="swfViewerZoomInput">Zoom</label>
          <input id="swfViewerZoomInput" type="range" min="50" max="200" step="5" value="100" />
          <button id="swfViewerPauseBtn" type="button">Pause</button>
          <button id="swfViewerResumeBtn" type="button">Resume</button>
          <button id="swfViewerSaveBtn" type="button">Save</button>
          <button id="swfViewerCloseBtn" type="button">Close</button>
        </div>
      </div>
      <div id="swfViewerHost" class="swf-viewer__host"></div>
    </div>
  </dialog>

  <div id="contextMenu" class="context-menu context-menu--hidden"></div>

  <script src="app.js"></script>
</body>
</html>
