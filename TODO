# shitcord67 TODO

## Maintainer directives (persistent)
- Future LLM instances are allowed to add/update this TODO as they implement features.
- Future LLM instances are allowed to commit local changes in coherent batches without extra confirmation.
- Prefer continuing implementation momentum with minimal user interaction unless blocked.

## Done (basic MVP)
- Username login.
- [done] Unified login identity field (`username` or `user@example.com`) to avoid duplicate username/JID entry confusion.
- [done] Login-time XMPP auth validation gate (fails closed: stays on login page when auth/connect fails).
- [done] XMPP roster sync now auto-creates DM contacts/threads from account contact list.
- [done] XMPP bookmarks/groups now map into an `XMPP Spaces` guild/channel surface.
- [done] Login can optionally prefill from `.xmpp.local.json` via a local profile dropdown when the file is web-accessible.
- [done] Added dedicated XMPP Console with runtime/auth/endpoint/stanza diagnostics (filter/search/pause/copy).
- [done] Added XEP-0156 host-meta WebSocket discovery for smarter XMPP endpoint selection on login.
- [done] Added local Node XMPP auth gateway fallback (`scripts/xmpp-auth-gateway.mjs`) for browser/Electron compatibility.
- [done] Added xmpp.jp Strophe PLAIN-only SASL workaround and disabled auth-fail reconnect loops.
- [done] Added in-client XMPP registration dialog backed by local gateway `/register` endpoint.
- [done] Added live XMPP roster-push handling and auto-mapped joined/seen MUC rooms into `XMPP Spaces`.
- [done] Added bookmarks sync fallback chain: XEP-0402 pubsub (`urn:xmpp:bookmarks:1`) then legacy private XML (`storage:bookmarks`).
- [done] Added `Add Friend` DM modal (username/JID) and direct XMPP one-to-one DM stanza send/receive path.
- Discord-like multi-pane layout (server rail, channel list, chat, profile card).
- Local profile customization: bio, avatar color, banner color or URL.
- Profile image upload with validation and preview.
- Create servers (guilds).
- Create text channels.
- Send messages as logged-in user.
- Message editing/deleting.
- Reply threading and basic message reactions.
- Per-guild member list with presence groups.
- Channel topic + channel settings.
- Slash commands (`/me`, `/shrug`, `/clear`, `/topic`, `/nick`, `/status`, `/markread`) with live popup.
- Import/export JSON snapshot for backup/testing.
- Right-click context menus for guilds/channels/messages/users.
- Keyboard navigation for context menus (arrow/enter/esc).
- Unread + mention badges for channels and guild rail with mark-as-read actions.
- Channel list filter/search input.
- Discord-like media picker (GIF/sticker/emoji/SWF/SVG tabs) with search and click-to-send.
- HTML media tab + HTML embed rendering in chat attachments.
- DM sidebar with 1:1 direct-message threads.
- User profile notes (private notes per account/user pair).
- Guild folder grouping in server rail.
- OLED theme mode with Appearance toggle.
- Per-guild nicknames via profile editor and `/nick`.
- Per-guild avatar variants via profile editor.
- Per-guild banner variants via profile editor.
- Guild-scoped status override (separate from global status).
- Custom status emoji + timed expiry presets (30m/1h/4h/today).
- Channel type variants (text/announcement/forum/media) with distinct labels.
- DM search/quick switch via sidebar filter and Enter-to-open.
- Nested context-menu submenus for grouped actions.
- DM-only sidebar mode toggled via top `S67` button.
- Top DM switcher uses emoji-style icon and shows DM unread/mention badge.
- Quick DM input in user popout (send without leaving profile card).
- Role color applied to member list, message usernames, and profile names.
- DM unread divider + jump-to-newest control in DM threads.
- Forum channel messages render as post-style cards.
- Local SWF catalog generated in `swf-index.json`.
- Guild custom emoji + sticker/media imports from URL or local files.
- Basic markdown-style message formatting (bold/italic/code/strike/quotes/links).
- Auto-runtime bootstrap for Ruffle and dotLottie in app startup.
- Add per-message debug inspector pane with decoded attachment/network info.
- Add true detachable SWF mini-player (PiP-like floating window) independent of channel view.
- Local persistence via browser storage for easy debugging and rapid iteration.

## Near-term
- [done] Per-guild notification settings (mute/mentions only/all).
- WebXDC packaging path: `.xdc` zip, `manifest.toml`, and realtime sync via `joinRealtimeChannel().send`.
- Bundle Ruffle locally (self-hosted script) and support richer SWF controls/fallback.
- dotLottie controls parity (pause/speed/scrub) and richer APNG/sticker management.
- Add provider-backed GIF/sticker search adapter (GIPHY/Tenor) with local fallback.

## Protocol/transport path
- Define transport adapter interface (`send`, `subscribe`, `fetchHistory`, `presence`).
- Build `local-json` adapter first (file-backed or websocket-backed).
- Add XMPP adapter skeleton (MUC rooms mapped to guild/channel abstraction).
- Add Matrix adapter skeleton (space/room mapping).

## Existing ideas to revisit
- If possible make it Discord-API or discord.js compatible.
- WebXDC.
- [done] SVG display support in chat.
- In-line slash commands with rich media embeds.
- GIF and sticker picker with provider consent and local fallback.
- Forums: https://xmpp.org/extensions/xep-0508.html
- XMPP Whiteboard plugin.
- Multiple accounts logged in at the same time.
- Remote XMPP server developer interface (for example ejabberd).
- SVG/SWF picker for flash and SVG animations.

## Discord parity targets (from official docs)
- Per-server profiles and avatar variants.
- Rich status and custom status flow.
- Thread channels for focused sub-conversations.
- Forum channels with post-style discussion.
- Full slash-command command palette and app command support.
- Channel type expansion (voice, stage, announcement/media-like channel support).
- Upload flow + media embeds + sticker/GIF experience.
- Reactions on messages.
- Full user settings breadth (privacy, notifications, keybinds, accessibility, voice/video).

## Others (user added to TODO, feel free to reposition)
- Clients should build a P2P network and attachments should be stored there to make expensive server storage unnecessary
- Group servers/guild together
- Vencord-like plugins
- Widgets like Element Matrix protocol messenger
- More XMPP spec extensions
- Read more on Discord blogpost about features, investigate screenshots
- in-line chat slash commands like Telegram (featuring images poppin up fitting to context e.g. cards for a uno game run by an application bot)
- Direct messages to users. In the lower-left of the client or by clicking on username or user list when profile pops open there is a chat input field
- Save notes about users on profiles of other users
- OLED theme by default (with considerations for blue light filter users. Mentions in white, green or red?)
- Add full nested context menu variants (invite/copy-id/submenus) and keyboard navigation.
- Markdown support (preferably Discord-compatible, maybe even more like GitHub-flavoured?)
- Discord embeds
- Discord RPC
- [done] Implement PDF viewer in chat
- Implement local Linux terminal emulator with some syntax to run some commands, SIXEL display?
- WASM applications, console emulators for e.g. Nintendo, some co-op stuff...
- cohost-like CSS crimes blogs
- Blogs accessible on user profiles
- [done] Display simple HTML files in chat.
- HTMl formatting of messages
- Full-fledged image editor, sticker and animation maker
- Support openraster
- Option to send mails? shitcord67 as a mail client with option to save mail files?
- Get inspiration from chinese WeChat which is the everything app, lol
- The guild channel sidebar and the DM sidebar should be seperate. The DM sidebar should only be visible when clicking at the top icon (S67 for now, maybe replace with SVG version of ðŸ«ª  emoi)
- [done] Please split the sign-in/welcome back part from the actual application. By that I mean I don't want to be able to scroll up/down to the different parts...
- [done] A person creating a guild should by default have owner permissions over it, allowed to do everything regarding it.
- [done] Do not show SWF options in context menu when no SWF is in message
- [done] Do not overlay custom context menu when right-clicking over Ruffle
- [done] Implement two click data-privacy preserving media loading (with option to remember choice or allow all, with whitelist for domains; wildcard/regex support)
- [done] Allow message types that multiple people can edit (showing name and small profile icon)
- [done] Show message editing history
- [done] Allow moderators on guild to edit member messages; show (edited by staff) instead of just (edited)
- Option to build a local client (electron for now or alternative to that?)
- [done] Implement drag & drop on window to attach files to chat (into the preview; user needs to still press enter once to send)
- [done] Option to store documents and texts in the picker
- [done] Implement viewer for displaying OpenDocument formats (spreadsheet, presentation, rich text documents)
- [done] Implement viewer for displaying Microsoft RTF
- [done] Implement some other funny viewers... (example: inline HEX viewer for `.bin`)
- Implement PDF viewer independent from browser
- Emoji picker should allow to search for all up-to-date emojis (ideally also taking other languages into account)
- Language settings, localized to system per default (on on-boarding asking in english if the language is correct and option to switch to other language via dropdown and "Switch to" button with English per default selected)
- Some things should use dropdowns like some status-related things
- Please really think about how to improve UX
- Make sure emojis display correctly not only in Chromium but also Gecko
- Telegram-style polls in channels/DMs (single-choice and optional multiple-choice)
- [done] Discord-style forum tags and per-thread tag filtering
- [done] Telegram-style message scheduling / send later
- Discord-style per-channel slowmode option
- [done] Spoiler message support (`||spoiler||`) with click-to-reveal in chat
- [done] Telegram-style quick polls (`/poll question | option1 | option2...`) with vote + close/reopen flow
- [done] Per-conversation composer drafts (channel/DM) with restore on switch/refresh
- [done] Utility slash commands (`/tableflip`, `/unflip`, `/lenny`, `/roll`, `/timestamp`)
- [done] Discord-style channel unread banner with quick mark-read + jump
- [done] Announcement channels are read-only for non-moderators (composer notice + send guard)
- [done] Per-channel slowmode (`/slowmode`, channel settings, channel context presets, cooldown enforcement)
- [done] Channel utility slash commands (`/pins`, `/unpinall`, `/rename`, `/channelinfo`, `/whereami`, `/jumpunread`)
- [done] Channel productivity shortcuts (`Alt+R`, `Alt+I`, `Alt+N/P`, `Alt+ArrowUp/Down`)
- [done] Unread navigation slash commands (`/nextunread`, `/prevunread`, `/unreadcount`)
- [done] Avoid browser-reserved shortcut overrides (moved file/PDF/pins/read actions to `Alt+...`)
- [done] Header next-unread control with live unread-channel count
- [done] Discord-like visual polish pass (font stack, channel rows, header/actions, message spacing, member list)
- [done] Guild setup presets + starter-channel wizard options
- [done] Guild settings dialog (name/description/accent + admin delete)
- [done] DM home/friends-style screen when no DM thread is selected
- [done] Login/chat screen-state hardening (`safeRender` + forced auth-based screen sync on startup/login/hashchange)
- [done] Message list now uses Discord-like avatar column + compact grouping for consecutive messages
- [done] DM home cards upgraded with avatar/presence/time preview layout
- [done] Discord-style surface spacing pass: server rail/channel panel/header/member panel tightened toward desktop proportions
- [done] Composer shell updated toward Discord geometry (pill shell, icon-centric controls, compact submit)
- [done] Composer upgraded to single-line-growing textarea (`Enter` send, `Shift+Enter` newline)
- [done] Channel/DM section headers are now collapsible with persisted preference state
- [done] Added section collapse shortcuts (`Alt+Shift+D` and `Alt+Shift+C`)
- [done] Header channel title now uses dedicated glyph + label structure (closer to Discord)
- [done] Header topic now hides when empty and displays divider only when needed
- [done] Channel unread counters now use subtle dot badges for non-mention unread state
- [done] Server rail active guild/DM now shows Discord-style left active indicator pill
- [done] Member rows now include secondary status line for better scanability
- [done] Channel sidebar section chevrons now reflect collapsed/expanded state
- [done] Draft badges for channels and DMs (unsent composer drafts are now visible in lists)
- [done] Sidebar section headers now show compact unread/draft counters
- [done] Slash commands for draft/search QoL (`/drafts`, `/cleardrafts [all]`, `/focus [search|composer]`)
- [done] `Ctrl+K` / `Cmd+K` quick search focus shortcut
- [done] `Ctrl+Enter` / `Cmd+Enter` send support in multiline composer
- [done] Search `Escape` on empty now blurs filter/search fields
- [done] DM home icon context menu now supports "Mark All DMs Read"
- [done] Clicking active channel header copies conversation reference (`#channel` / `@dm`)
- [done] Slash command `/newdm <username-or-jid>` to open/create DM directly
- [done] Slash command `/closedm` to close active DM quickly
- [done] Slash command `/leaveguild` to leave active guild without deleting global state
- [done] Channel context menu: duplicate channel
- [done] Channel context menu: move channel up/down
- [done] Keyboard channel reorder shortcut (`Ctrl+Alt+ArrowUp/Down`)
- [done] DM/Channel section header context menus with quick actions
- [done] Composer hard-clear shortcut (`Ctrl+Shift+Backspace`)
- [done] Disabled browser autofill/autocomplete on login/search/composer inputs to reduce popup interference
- [done] Prevent native browser context menu while custom context menu is open/targeted
- [done] Slash command `/newchannel <name> [type]` (manage channels)
- [done] Slash command `/dupchannel` (duplicate active channel)
- [done] Slash command `/movechannel <up|down|top|bottom>` (reorder active channel)
- [done] Slash command `/markdmread` for current DM thread
- [done] Slash command `/markallread` for all guild channels + DMs
- [done] Quick creation shortcuts (`Ctrl+Shift+N` create channel, `Ctrl+Shift+D` new DM)
- [done] Channel quick jump shortcuts (`Alt+Home`/`Alt+End`)
- [done] Browser tab title now reflects unread/mention counts
- [done] Warn on reload/close when composer has unsent state
- [done] Enter on exact slash command now submits immediately even with command popup visible
- [done] Mark Read header button now works in DMs (`Mark DM Read`)
- [done] Mark Read button context menu with `current`, `guild`, and `all` read actions
- [done] Slash command `/copylink`
- [done] Slash command `/copyid`
- [done] Slash command `/copytopic`
- [done] Slash command `/notify [status|all|mentions|mute]`
- [done] Read-state shortcuts (`Alt+Shift+R` current, `Alt+Shift+A` all)
- [done] Guild notification cycle shortcut (`Alt+Shift+G`)
- [done] DM slash support parity for `/copyid`, `/copylink`, `/markdmread`, `/markallread`, `/focus`
- [done] Find in conversation modal (`Ctrl+F`) with in-view hit highlighting and keyboard navigation
- [done] Message actions/context menus now include "Mark Unread From Here" for channel, DM, and forum threads
- [done] Profile/guild/role forms now have synchronized text + native color picker inputs
- [done] Header now has a direct `Find` button to open conversation search quickly
- [done] Added `/find [query]` slash command to open/prefill find dialog from composer
- [done] Added `/findnext` and `/findprev` slash commands for match traversal
- [done] Added `/markunread [message-id-prefix|last]` slash command in channels and DMs
- [done] Added find traversal shortcuts `F3` / `Shift+F3` and `Ctrl+G` / `Shift+Ctrl+G`
- [done] Strengthened custom context menu suppression on menu/submenu right-click
- [done] Hardened anti-autocomplete attributes for login/search/find/quick-switch/composer inputs at runtime
- [done] `/help` now supports optional text filter (`/help find`) for faster command discovery
- [done] DM slash command parity expanded for `/find`, `/findnext`, `/findprev`, `/markunread`
- [done] Find dialog upgraded with scoped filters (`from`, `before/after`, `has link`) and inline `/find` token parsing.
- [done] Pins dialog upgraded with quick filter and sort modes (newest/oldest/author).
- [done] Channel permission overrides per role (`view`, `send`, `reactions`, `create threads/posts`) with enforcement in channel rendering/composer/reactions.
- [done] Added voice/stage channel shells with join/leave controls, stage raise-hand/speaker states, and connected-member sidebar behavior.
- [done] Added stage moderation controls (approve/dismiss raised hands, promote/demote speakers, mute/unmute, disconnect participant).
- [done] Added dedicated `stageModeration` role permission with backward-compatible migration.
- [done] Added voice/stage slash command suite (`/vc`, `/voicewho`, `/hand`, `/speaker`, `/stage`) for quick moderation and self controls.
- [done] Added live voice/stage activity feed and channel-list occupancy badges.
- [done] Added `Alt+V` shortcut for fast join/leave in active voice/stage channel.
- [done] Added advanced voice/stage moderation commands (`/voiceactivity`, `/vcmove`, `/voicekick`, `/stagequeue`, `/stageclearqueue`).
- [done] Added self mute hotkey (`Alt+M`) and voice/stage context-menu quick actions.
- [done] Added voice discovery/jump commands (`/voicechannels`, `/voicegoto`) and stage bulk moderation commands (`/stageshush`, `/stageaudience`).
- [done] Added `Alt+J` quick-join/leave hotkey and voice surface quick-copy link action.
- [done] Added experimental WebSocket relay transport mode (settings + `/relay` command + `scripts/ws-relay-server.mjs`) for real multi-user chat across clients.
- [done] Added dependency-free HTTP/SSE relay mode (`scripts/http-relay-server.mjs`) for multi-user chat without npm packages.
- [done] Added transport adapter modes with experimental XMPP connector (Strophe load + connect/auth + MUC room join/send/receive).
- [done] Added profile identity fields: avatar decoration emoji, guild tag, profile effect, and nameplate SVG/URL
- [done] Avatar decorations now render on dock/member/message/popout avatars
- [done] Guild tag chips now render across name surfaces with click-to-inspect behavior
- [done] Nameplate SVG background styling now renders on member/message/popout names
- [done] Animated profile effects (`aurora`, `flame`, `ocean`) now apply on profile popouts
- [done] Added lightweight quest badges based on account activity (messages/reactions/polls)
- [done] Added `/quests` and `/profilefx` slash commands (plus DM parity for both)
- [done] Added `/questprogress` and `/questbadges` commands (with DM parity)
- [done] Added `/guildtag [TAG|clear]` command (with DM parity)
- [done] Added `/decor [emoji|clear]` command (with DM parity)
- [done] Added `/nameplate [url|data:image/svg+xml|clear]` command (with DM parity)
- [done] Added `Alt+Q` shortcut to show quest progress quickly
- [done] Added `Quest Stats` action in self profile menu
- [done] Added `Copy -> Guild Tag` option in message/member user context menus
- [done] Added profile editor live identity preview card (banner/avatar/nameplate/tag/effect)
- [done] Added one-click `Clear Identity Extras` profile action
- [done] Added `/whoami` identity summary command (channel + DM)
- [done] Added `/profilecard` command to post profile card text (channel + DM)
- [done] Added `Copy -> Display Name`, `Avatar Decoration`, and `Nameplate URL` context actions
- [done] Added `Show Quest Summary` action in message/member context menus
- [done] Added `Alt+Y` shortcut to open profile editor
- [done] Added cosmetics shop + inventory system (collectible decor/nameplates/effects, shard wallet from activity milestones, buy/equip flow).
- Make in-line chat commands clickable in the pop-up. Also e.g. when bots display rich media visual things like playing cards, then those can also be defined as individually click able even when displayed in the same line
- Create a bot which provides a shedding-type card game that users can start in chat and play together (each user gets displayed their own deck by leveraging advanced in-line commands
- Learn a lot about Discord from resources like:
https://docs.discord.com/developers/intro    
https://discord.com/blog
https://discord.js.org/docs/packages/discord.js/main
- [done] Users can have custom SVG SMIL animations displaying in their nameplate that is visible in the guild online lists.
- [done] Users can have custom profile effect visible when somebody opens their profile
- [done] Users can have custom avatar decorations
- User can show a guild tag next to their name which opens up a small pop-up with a info profile of that guild
- Implement some quests which give virtual currency or small icons on the profile. Maybe also some useful ones like "create an issue on the shirtcord67 repo" (with auto-validation)?
- Seasonal cosmetics rotation and limited-time bundles (shop featured row + countdown).
- Cosmetic gifting flow for guild members (optional confirmation + anti-spam cooldown).
- Switch to actually using XMPP protocol or maybe something that is a layer in-between so that we are compatible to XMPP and Matrix?
- Well at the very least make it possible to login with a XMPP account and communicate with people from XMPP, sending them real XMPP events.
- Ideally also same for Matrix
- IRC?
- chesspark used XMPP for chess... investigate about that and maybe we can offer something like it too, lol
- Make shitcord67 functionality use more XMPP XEPs (https://xmpp.org/extensions/)
- Custom (hopefully not spammy) XMPP events/messages/extension in case existing XEPs don't cover stuff other users should see (e.g. maybe the user-defined nametags that use SVG and SMIL?)
(https://stackoverflow.com/questions/15622109/xmpp-jabber-for-custom-messages-i-need-to-modify-the-client-or-the-server)
- Abstract the XMPP stuff away so that we can implement Matrix support as well
- On the login screen select which to use XMPP or Matrix (when Matrix id with : is entered, hide the fields for XMPP for example and show Matrix in a dropdown to select protocols)
- Later when support for displaying chats from multiple accounts is displayed, we might use both somehow at the same time, but it's complicated
